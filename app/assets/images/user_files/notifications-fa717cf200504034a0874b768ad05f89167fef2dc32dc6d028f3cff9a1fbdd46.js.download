function addActiveLink(){var i=location.href,t=i.lastIndexOf("/"),e=i.length,a=i.substring(t+1,e);a.includes("courses")?$("#bootcamp-prep-dropdown-link").addClass("-active_link"):a.includes("community")?$("#community-link").addClass("-active_link"):a.includes("student-support")?$("#student-support-link").addClass("-active_link"):a.includes("timeline")?$("#timeline-link").addClass("-active_link"):a.includes("preview-full-program")&&$("#preview-full-program-link").addClass("-active_link")}function hoverHandlerForPrepCourseDropdown(){var i="#bootcamp-prep-dropdown-link";$(".dropdown.left-nav-item").hover(function(t){$(i).hasClass("-active_link")&&!$(i).hasClass("-hide_active_link")?$(i).addClass("-hide_active_link"):$(i).hasClass("-active_link")&&$(i).hasClass("-hide_active_link")&&$(i).removeClass("-hide_active_link")}),$("#bootcamp-prep-dropdown-menu").hover(function(t){$(i).hasClass("-active_link")&&!$(i).hasClass("-hide_active_link")&&"bootcamp-prep-dropdown-menu"==t.target.id&&$(i).addClass("-hide_active_link")})}function markNotificationAsClicked(){$(".mark_as_clicked_notification").click(function(){var i=$(this),t=i.data("id");updateClicked(t,function(e){var a=document.getElementById(t);null!==a&&(a.className="drop-down",a.id="");var n=i.parent();n.fadeOut(100)})})}function updateClicked(i,t){$.ajax({url:"/update_clicked",data:{id:i},type:"PUT"}).success(t)}function setSiteTitle(i){"0"!==i&&""!==i&&0!==i?document.title="("+i+") "+title:document.title=title}function loadNotificationsToBell(t){var e=$("#top-nav-bell-drop-down");if(e.append("<div id='addNotifications'></div>"),t.length<=0)$("#addNotifications").prepend("<div id='noNotifications' class=drop-down>You don't have any notifications yet, but we'll put important information here.</div>");else for(i=t.length-1;i>=0;i--)e.append(setupNotification(t[i])),t[i]["clicked?"]===!1&&$("#"+t[i].id).addClass("unclicked")}function addNewNotificationToBell(i){$("#noNotifications").remove(),$.get(i).success(function(i){var t=i.length-1,e=i[t],a=$("#top-nav-bell-drop-down > div").map(function(){return this.id}),n=e.id.toString();$.inArray(n,a)===-1&&($("#addNotifications").prepend(setupNotification(e)),e["clicked?"]===!1&&$("#"+e.id).addClass("unclicked"))})}function setupNotification(i){var t,e,a="",n="",o="",d=" ",l=i.id+"-link";i.plain_text&&null!==i.plain_text&&(o=i.plain_text+d),"/"!==i.path[0]&&(n="_blank"),"permanent"===i.notification_type&&(a='<img src="/assets/icons/exclamation-b12df24a05d67531e26e46759bdad1916922d6e9afb525eeceaa8cfc0683c67f.png" class="important-notification">'),e=$.timeago(i.created_at);var r="<div class=drop-down id ="+i.id+">"+a+"<span class='notification-title' >"+i.title+d+"</span>"+o+"<a href ="+i.path+" id = "+l+" target="+n+">"+i.description+"</a><br/><span class='notification-date'>"+e+"</span></div>";return r}function firebaseNotificationSubscription(i,t){var e=$("#notification-number"),a={apiKey:e.data("firebaseKey"),authDomain:e.data("firebaseAuth"),databaseURL:e.data("firebaseDatabase"),storageBucket:e.data("firebaseStorage"),messagingSenderId:e.data("firebaseMessaging")};firebase.initializeApp(a);var n=firebase.database(),o=firebase.database().ref("users/"+e.data("firebaseChannel"));o.on("value",function(e){if(e.val())var a=e.val().notification_count;else var a=t;e.val()&&a>0&&addNewNotificationToBell(i),showNotificationCountForBell(a)})}function showNotificationCountForBell(i){var t=$("#notification-number");t.text(i),0===i||"0"===i?(t.addClass("hide-number"),document.title=title):(t.removeClass("hide-number"),document.title="("+i+") "+title)}function updateNotificationCountForUser(){$.ajax({url:"/users/update_notification_count",data:{user:{notification_count:0}},type:"PUT"})}function setupNotificationBellClickHandler(){$("#top-nav-bell-drop-down").click(function(i){if(""!==i.target.id){var t=i.target.id;"top-nav-bell-drop-down"!==i.target.parentElement.id&&(t=i.target.parentElement.id),updateClicked(t,function(){document.getElementById(t).className="drop-down"})}})}function clickHandlerForDropDowns(){$("html").click(function(i){"topnav-user-name"===i.target.id||"topnav-user-avatar"==i.target.id||"topnav-user-caret"==i.target.id?(hideBellDropDown(),$("#user-profile-dropdown").toggle()):"top-nav-bell"===i.target.id||"notification-number"===i.target.id?(hideSignOutDropDown(),updateNotificationCountForUser(),$("#top-nav-bell-drop-down").toggle(),$(".top-nav-bell-drop-down-holder").toggle()):(hideSignOutDropDown(),hideBellDropDown())})}function hideBellDropDown(){$("#top-nav-bell-drop-down").hide(),$(".top-nav-bell-drop-down-holder").hide()}function hideSignOutDropDown(){$("#user-profile-dropdown").hide()}$(function(){addActiveLink(),markNotificationAsClicked(),clickHandlerForDropDowns(),setupNotificationBellClickHandler(),hoverHandlerForPrepCourseDropdown()});